<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Trader Route Admin Panel</title>
<link rel="icon" href="../assets/logos.png" type="image/png" />
<style>
  :root{--brand:#008b6a;--danger:#d9534f;--info:#5bc0de}
  *{box-sizing:border-box}
  body{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;margin:0;background:#f4f4f4;color:#222}
  #login-screen{display:flex;justify-content:center;align-items:center;height:100vh;background:#fff}
  .login-box{background:#f9f9f9;padding:40px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.1);text-align:center;width:320px}
  .login-box img{height:60px;margin-bottom:15px}
  .login-box h2{margin:0 0 15px}
  .login-box input{width:90%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:6px}
  .login-box button{width:100%;padding:10px;background:var(--brand);border:none;color:#fff;border-radius:6px;cursor:pointer;font-weight:700}
  .login-box button:hover{background:#006b52}
  .error-msg{color:#e53935;font-size:13px;height:18px}
  #dashboard{display:none;min-height:100vh}
  .sidebar{width:240px;background:#fff;border-right:1px solid #ddd;padding:20px;position:fixed;top:0;bottom:0}
  .sidebar img{height:40px;margin-bottom:10px}
  .sidebar h3{color:var(--brand);font-size:18px;margin:8px 0 16px}
  .navlink{display:block;text-decoration:none;color:#333;padding:8px;border-radius:6px;margin-bottom:8px}
  .navlink:hover,.navlink.active{background:var(--brand);color:#fff}
  .main{margin-left:240px;padding:30px}
  .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
  .header h2{color:var(--brand);margin:0}
  .btn{padding:8px 12px;border:none;border-radius:6px;cursor:pointer;font-weight:600}
  .btn-primary{background:var(--info);color:#fff}
  .btn-green{background:var(--brand);color:#fff}
  .btn-red{background:var(--danger);color:#fff}
  .btn-outline{background:#fff;border:1px solid #ccc;color:#333}
  .card{background:#fff;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.08);padding:20px;margin-top:16px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:10px;border-bottom:1px solid #eee;text-align:left}
  thead th{background:#fafafa}
  #edit-section{display:none;background:#fff;padding:20px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.1);max-width:700px;margin:20px auto}
  #edit-section input,#edit-section select,#edit-section textarea{width:100%;margin:6px 0 12px;padding:10px;border:1px solid #ccc;border-radius:6px}
  @media (max-width:900px){
    .sidebar{position:static;width:auto}
    .main{margin:0}
  }

</style>
</head>
<body>

<!-- LOGIN -->
<div id="login-screen">
  <div class="login-box">
    <img src="../assets/logos.png" alt="Trader Route Logo" />
    <h2>Admin Panel</h2>
    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />
    <button id="loginBtn">Login</button>
    <div class="error-msg" id="loginError"></div>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">
  <aside class="sidebar">
    <img src="../assets/logos.png" alt="">
    <h3>Trader Route</h3>
    <a href="#" class="navlink active" id="nav-requests">Requests</a>
    <a href="#" class="navlink" id="nav-users">Registered Users</a>
    <a href="#" class="navlink" id="nav-logout">Logout</a>
  </aside>

  <main class="main">
    <div class="header">
      <h2 id="viewTitle">Requests</h2>
    </div>

    <!-- REQUESTS SECTION -->
    <section id="requestsView" class="card">
      <table>
        <thead>
          <tr>
            <th>Title</th><th>Type</th><th>Company</th><th>Country</th><th>Category</th><th>Date</th><th>Status</th>
          </tr>
        </thead>
        <tbody id="requestsTable"></tbody>
      </table>
    </section>

    <!-- USERS SECTION -->
    <section id="usersView" class="card" style="display:none">
      <h3>Registered Users</h3>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Email</th>
            <th>Company</th>
            <th>Country</th>
            <th>Registered At</th>
          </tr>
        </thead>
        <tbody id="usersTable"></tbody>
      </table>
      <div id="usersMsg" style="margin-top:8px;color:#2e7d32;font-weight:600"></div>
    </section>
  </main>
</div>

  
<script>
(() => {
  const loginScreen = document.getElementById('login-screen');
  const dashboard = document.getElementById('dashboard');
  const loginBtn = document.getElementById('loginBtn');
  const loginError = document.getElementById('loginError');

  loginBtn.addEventListener('click', () => {
    const u = document.getElementById('username').value.trim();
    const p = document.getElementById('password').value.trim();
    if (u === 'admin' && p === 'trader2025') {
      loginScreen.style.display = 'none';
dashboard.style.display = 'block';
showRequests();
    } else {
      loginError.textContent = 'Invalid username or password!';
    }
  });

  document.getElementById('nav-requests').addEventListener('click', (e) => {
    e.preventDefault();
    document.getElementById('requestsView').style.display = 'block';
    document.getElementById('usersView').style.display = 'none';
    document.getElementById('viewTitle').textContent = 'Requests';
  });

  document.getElementById('nav-users').addEventListener('click', (e) => {
    e.preventDefault();
    document.getElementById('requestsView').style.display = 'none';
    document.getElementById('usersView').style.display = 'block';
    document.getElementById('viewTitle').textContent = 'Registered Users';
    showUsers();
  });

  document.getElementById('nav-logout').addEventListener('click', (e) => {
    e.preventDefault();
    location.reload();
  });

  function showUsers(){
    function showRequests(){
  const tbody = document.getElementById('requestsTable');
  tbody.innerHTML = '';
  const requests = JSON.parse(localStorage.getItem('requests') || '[]');

  if (!requests.length){
    tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;color:#777;padding:15px;">No requests yet.</td></tr>';
    return;
  }

  requests.forEach((r) => {
    const tr = document.createElement('tr');
    const date = r.date ? new Date(r.date).toLocaleDateString() : '-';
    const status = r.approved ? '✅ Approved' : '⏳ Pending';
    const actionBtn = !r.approved
      ? `<button class="btn-green" onclick="approveRequest(${r.id})">Approve</button>`
      : `<button class="btn-outline" disabled>Approved</button>`;

    tr.innerHTML = `
      <td>${r.title || '-'}</td>
      <td>${r.type || '-'}</td>
      <td>${r.user || '-'}</td>
      <td>${r.country || '-'}</td>
      <td>${r.category || '-'}</td>
      <td>${date}</td>
      <td>${status}<br>${actionBtn}</td>
    `;
    tbody.appendChild(tr);
  });
}
    window.approveRequest = function(id){
  const all = JSON.parse(localStorage.getItem('requests') || '[]');
  const index = all.findIndex(r => r.id === id);
  if(index > -1){
    all[index].approved = true;
    localStorage.setItem('requests', JSON.stringify(all));
    alert('Request approved successfully!');
    showRequests();
  }
};
    const usersTbody = document.getElementById('usersTable');
    const usersMsg = document.getElementById('usersMsg');
    const users = JSON.parse(localStorage.getItem('tr_users') || '[]');
    usersTbody.innerHTML = '';
    if (!users.length) {
      usersMsg.textContent = 'No registered users yet.';
      return;
    }
    usersMsg.textContent = `Total ${users.length} user(s).`;
    users.forEach((u, i) => {
      const tr = document.createElement('tr');
      const date = u.created ? new Date(u.created).toLocaleString() : '-';
      tr.innerHTML = `
        <td>${i + 1}</td>
        <td>${u.name || '-'}</td>
        <td>${u.email || '-'}</td>
        <td>${u.company || '-'}</td>
        <td>${u.country || '-'}</td>
        <td>${date}</td>
      `;
      usersTbody.appendChild(tr);
    });
  }
})();
</script>
</body>
</html>
