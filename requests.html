<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trader Route â€“ Requests</title>
  <meta name="description" content="Explore global buy and sell requests on Trader Route. Filter by category and country to find real B2B opportunities worldwide.">
  <link rel="icon" href="assets/logos.png" />
  <style>
    :root{ --green:#008b6a; --green-dark:#006b52; --bg:#f6f8fa; }
    body{ font-family:"Inter","Segoe UI",Arial,sans-serif; margin:0; background:var(--bg); color:#222; }
    header{display:flex;align-items:center;justify-content:space-between;background:#fff;
      padding:12px 20px;border-bottom:1px solid #ddd;box-shadow:0 2px 4px rgba(0,0,0,.05);position:sticky;top:0;z-index:1000;}
    header .brand{display:flex;align-items:center;gap:10px;cursor:pointer;}
    header img{height:50px}
    header .tagline{font-size:14px;color:#555;font-weight:600}
    nav a{margin:0 10px;text-decoration:none;color:#333;font-weight:600}
    nav a:hover{color:var(--green)}
    .btn{border:none;border-radius:6px;padding:8px 14px;font-weight:600;cursor:pointer}
    .btn-green{background:var(--green);color:#fff}
    .btn-green:hover{background:var(--green-dark)}
    .tabs{display:flex;justify-content:center;background:#fff;border-bottom:1px solid #ddd;gap:10px;padding:14px 0}
    .tabs button{background:none;border:none;font-weight:600;font-size:17px;padding:10px 24px;border-radius:25px;cursor:pointer;color:#333}
    .tabs button.active{background:var(--green);color:#fff}
    .container{max-width:1300px;margin:30px auto;display:flex;gap:20px;padding:0 15px}
    .sidebar{width:300px;background:#fff;padding:22px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.06)}
    .content{flex:1;background:#fff;border-radius:12px;padding:30px;box-shadow:0 2px 6px rgba(0,0,0,.06)}
    .request-card{border:1px solid #e3e3e3;border-radius:8px;padding:15px;margin-bottom:15px;background:#fff;transition:.2s;cursor:pointer}
    .request-card:hover{box-shadow:0 3px 10px rgba(0,0,0,.08);transform:translateY(-2px)}
    .msg-btn{background:var(--green);color:#fff;border:none;border-radius:5px;padding:6px 10px;font-size:13px;font-weight:600;cursor:pointer;margin-top:6px}
    .msg-btn:hover{background:var(--green-dark)}
  </style>
</head>
<body>
  <header>
    <div class="brand" onclick="location.href='index.html'">
      <img src="assets/logos.png" alt="Trader Route Logo" />
      <span class="tagline">The Silk Road of E-Commerce</span>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="companies.html">Companies</a>
      <a href="requests.html" style="color:var(--green);font-weight:700;">Requests</a>
      <a href="contact.html">Contact</a>
      <a href="pricing.html">Prices</a>
    </nav>
    <div>
      <button class="btn btn-green" onclick="location.href='login.html'">Sign In</button>
      <button class="btn btn-green" onclick="location.href='register.html'">Sign Up</button>
    </div>
  </header>

  <div class="tabs">
    <button class="active" id="tabAll">All Requests</button>
    <button id="tabBuy">Buy Requests</button>
    <button id="tabSell">Sell Requests</button>
    <button id="tabFree" onclick="location.href='free-request.html'">Free Request</button>
  </div>

  <div class="container">
    <div class="sidebar">
      <h4>Categories</h4>
      <input type="text" id="categorySearch" placeholder="Search category..." />
      <ul id="categoryList"></ul>

      <h4>Countries</h4>
      <input type="text" id="countrySearch" placeholder="Search country..." />
      <ul id="countryList"></ul>
    </div>

    <div class="content">
      <input type="text" id="searchInput" placeholder="Search requests..." style="width:100%;max-width:420px;margin-bottom:15px;padding:10px;border-radius:6px;border:1px solid #ccc;">
      <div id="requestItems"></div>
    </div>
  </div>

  <script>
    const getRequests = () => {
      try {
        const arr = JSON.parse(localStorage.getItem("requests") || "[]");
        // ðŸ”¹ Her ilana otomatik id ekle
        arr.forEach((r, i) => { if (!r.id) r.id = i + 1; });
        localStorage.setItem("requests", JSON.stringify(arr));
        return arr;
      } catch { return []; }
    };

    const container = document.getElementById("requestItems");
    function renderRequests() {
      const data = getRequests();
      container.innerHTML = "";
      data.forEach(r => {
        const owner = r.ownerEmail || r.contactEmail || r.email || "";
        const div = document.createElement("div");
        div.className = "request-card";
        div.onclick = () => window.location.href = `request-detail.html?id=${r.id}&to=${encodeURIComponent(owner)}`;
        div.innerHTML = `
          <h5>${r.title || "Untitled"}</h5>
          <p>${r.description || ""}</p>
          <small>${r.country || ""} Â· ${r.category || ""}</small><br>
          ${owner ? `<button class='msg-btn' onclick="event.stopPropagation();window.location.href='messages.html?to=${encodeURIComponent(owner)}'">Message</button>` : ""}
        `;
        container.appendChild(div);
      });
    }

    renderRequests();
  </script>
</body>
</html>
