<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Requests — Trader Route</title>
<link rel="icon" href="assets/logos.png" type="image/png">
<style>
body{font-family:"Segoe UI",sans-serif;background:#f8f9fa;margin:0;}
header{background:#fff;padding:15px 40px;box-shadow:0 2px 8px rgba(0,0,0,0.1);display:flex;align-items:center;justify-content:space-between;}
header .logo{display:flex;align-items:center;gap:10px;}
header .logo img{height:40px;}
main{display:flex;padding:20px 40px;gap:20px;}
.sidebar{background:#fff;padding:20px;width:250px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,0.1);}
.sidebar h3{color:#008d62;}
.sidebar ul{list-style:none;padding:0;}
.sidebar ul li{padding:8px;border-bottom:1px solid #eee;cursor:pointer;}
.sidebar ul li:hover{background:#f0f0f0;color:#008d62;}
.content{flex:1;}
.filters{display:flex;gap:10px;margin-bottom:15px;}
.filters button{border:none;padding:8px 16px;border-radius:5px;cursor:pointer;}
.filters .active{background:#008d62;color:white;}
.request-card{background:#fff;padding:20px;border-radius:10px;margin-bottom:15px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.request-card:hover{transform:translateY(-2px);}
.request-card h4{margin:0;color:#000;}
small{color:#777;}
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="assets/logos.png" alt="logo">
    <span><b>Trader Route</b> — Requests</span>
  </div>
</header>

<main>
  <aside class="sidebar">
    <h3>Categories</h3>
    <ul id="categoryList"></ul>
  </aside>

  <section class="content">
    <div class="filters">
      <button id="allBtn" class="active">All Requests</button>
      <button id="buyingBtn">Buying Requests</button>
      <button id="sellingBtn">Selling Offers</button>
    </div>
    <div id="requestsContainer"></div>
  </section>
</main>

<script>
async function loadRequests() {
  const res = await fetch('data/requests.json');
  const data = await res.json();
  const container = document.getElementById("requestsContainer");
  const categoryList = document.getElementById("categoryList");
  const categories = [...new Set(data.map(item => item.category))];
  categoryList.innerHTML = categories.map(cat => `<li onclick="filterByCategory('${cat}')">${cat}</li>`).join('');
  displayRequests(data);
  document.getElementById("allBtn").onclick = () => { displayRequests(data); setActive("allBtn"); };
  document.getElementById("buyingBtn").onclick = () => { displayRequests(data.filter(i => i.type==="buying")); setActive("buyingBtn"); };
  document.getElementById("sellingBtn").onclick = () => { displayRequests(data.filter(i => i.type==="selling")); setActive("sellingBtn"); };
  window.filterByCategory = cat => displayRequests(data.filter(i => i.category===cat));
  function setActive(id){document.querySelectorAll(".filters button").forEach(b=>b.classList.remove("active"));document.getElementById(id).classList.add("active");}
  function displayRequests(list){
    container.innerHTML = list.map((r, i) => `
      <div class="request-card" onclick="location.href='request-detail.html?id=${i}'">
        <h4>${r.title}</h4>
        <small>${r.country} • ${r.category} • ${r.type}</small>
        <p>${r.description}</p>
      </div>`).join('');
  }
}
loadRequests();
</script>

</body>
</html>
