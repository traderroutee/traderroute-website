<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trader Route - Requests</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="assets/logo.png" />

  <style>
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: #f5f6f8;
      margin: 0;
      color: #222;
    }

    /* LOGO */
    header {
      display: flex;
      align-items: center;
      background: #fff;
      padding: 12px 20px;
      border-bottom: 1px solid #ddd;
    }
    header img {
      height: 52px;
      cursor: pointer;
    }

    /* TABS */
    .tabs {
      display: flex;
      justify-content: center;
      background: #fff;
      border-bottom: 1px solid #ddd;
      gap: 10px;
      padding: 12px 0;
    }
    .tabs button {
      background: none;
      border: none;
      font-weight: 600;
      font-size: 17px;
      padding: 10px 22px;
      border-radius: 25px;
      cursor: pointer;
      transition: 0.2s;
    }
    .tabs button.active {
      background: #007bff;
      color: white;
    }

    /* ANA YAPI */
    .container {
      max-width: 1200px;
      margin: 30px auto;
      display: flex;
      gap: 20px;
      padding: 0 15px;
    }

    /* SOL PANEL */
    .sidebar {
      width: 280px;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      height: 80vh;
      overflow: hidden;
    }

    .sidebar h4 {
      margin-bottom: 10px;
      color: #111;
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.4px;
    }

    .category-search,
    .country-search {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .category-list,
    .country-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
      overflow-y: auto;
      flex: 1;
      scrollbar-width: thin;
      scrollbar-color: #ccc transparent;
    }

    .category-list {
      max-height: 250px;
    }

    .country-list {
      max-height: 200px;
    }

    .category-list li,
    .country-list li {
      margin-bottom: 6px;
    }

    .category-list a,
    .country-list a {
      text-decoration: none;
      color: #333;
      display: flex;
      justify-content: space-between;
      font-size: 14px;
    }
    .category-list a:hover,
    .country-list a:hover {
      color: #007bff;
    }
    .count {
      color: #888;
      font-size: 13px;
    }

    #showMoreCountries {
      display: block;
      width: 100%;
      padding: 8px;
      border: none;
      background: #007bff;
      color: #fff;
      border-radius: 6px;
      margin-top: 10px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
    }

    #showMoreCountries:hover {
      background: #0056b3;
    }

    .clear-filters {
      background: #f8f9fa;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 7px 10px;
      margin-top: 10px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
    }

    .clear-filters:hover {
      background: #eaeaea;
    }

    /* SAĞ TARAF */
    .content {
      flex: 1;
      background: #fff;
      border-radius: 10px;
      padding: 25px;
    }

    .search-bar {
      margin-bottom: 20px;
    }

    #searchInput {
      width: 100%;
      max-width: 400px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .request-card {
      border: 1px solid #e3e3e3;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      background: #fff;
      transition: all 0.2s ease-in-out;
      cursor: pointer;
    }

    .request-card:hover {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .request-card h5 {
      margin: 0 0 5px;
      font-size: 17px;
    }

    .request-card small {
      color: #666;
    }

    #showMoreRequests {
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 10px 15px;
      cursor: pointer;
      font-weight: 600;
      margin: 20px auto;
      display: block;
    }

    #showMoreRequests:hover {
      background: #0056b3;
    }

    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        height: auto;
        max-height: none;
      }
    }
  </style>
</head>
<body>
  <!-- LOGO -->
  <header>
    <a href="index.html">
      <img src="assets/logos.png" alt="Trader Route Logo" />
    </a>
  </header>

  <!-- TABS -->
  <div class="tabs">
    <button class="active" id="tabAll">All Requests</button>
    <button id="tabBuy">Buy Requests</button>
    <button id="tabSell">Sell Requests</button>
  </div>

  <div class="container">
    <!-- SOL PANEL -->
    <div class="sidebar">
      <h4>Categories</h4>
      <input type="text" class="category-search" id="categorySearch" placeholder="Search category..." />
      <ul class="category-list" id="categoryList"></ul>

      <h4>Countries</h4>
      <input type="text" class="country-search" id="countrySearch" placeholder="Search country..." />
      <ul class="country-list" id="countryList"></ul>
      <button id="showMoreCountries">Show more countries</button>
      <button class="clear-filters" id="clearFilters">Clear Filters</button>
    </div>

    <!-- SAĞ TARAF -->
    <div class="content">
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search requests..." />
      </div>
      <div id="requestItems"></div>
      <button id="showMoreRequests">Show more requests</button>
    </div>
  </div>

  <script>
    const categories = [
      "Agriculture","Apparel","Automobiles & Motorcycles","Beauty & Personal Care",
      "Business Services","Chemicals","Computer Hardware & Software","Construction & Real Estate",
      "Consumer Electronics","Electrical Equipment & Supplies","Electronic Components & Supplies",
      "Energy","Environment","Fashion Accessories","Food & Beverage","Furniture",
      "Gifts & Crafts","Hardware","Health & Medical","Home & Garden","Home Appliances",
      "Lights & Lighting","Luggage, Bags & Cases","Machinery","Measurement & Analysis Instruments",
      "Minerals & Metallurgy","Office & School Supplies","Packaging & Printing","Rubber & Plastics",
      "Security & Protection","Service Equipment","Shoes & Accessories","Sports & Entertainment",
      "Telecommunications","Textiles & Leather Products","Tools","Toys & Hobbies","Transportation"
    ];

    const allCountries = [
      "Afghanistan","Albania","Algeria","Argentina","Australia","Austria","Bangladesh","Belgium","Brazil","Bulgaria",
      "Canada","Chile","China","Colombia","Czech Republic","Denmark","Egypt","Finland","France","Germany",
      "Greece","Hungary","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Japan",
      "Kenya","Kuwait","Lebanon","Malaysia","Mexico","Morocco","Netherlands","Nigeria","Norway","Pakistan",
      "Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Saudi Arabia","Singapore","South Africa",
      "South Korea","Spain","Sri Lanka","Sweden","Switzerland","Thailand","Turkey","Ukraine","United Arab Emirates","United Kingdom","United States"
    ];

    const getRequests = () => JSON.parse(localStorage.getItem("requests") || "[]");

    const requestContainer = document.getElementById("requestItems");
    const searchInput = document.getElementById("searchInput");
    const categoryList = document.getElementById("categoryList");
    const countryList = document.getElementById("countryList");
    const categorySearch = document.getElementById("categorySearch");
    const countrySearch = document.getElementById("countrySearch");
    const clearFilters = document.getElementById("clearFilters");

    let visibleRequests = 15;
    let visibleCategories = 15;
    let visibleCountries = 10;
    let activeTab = "all";
    let selectedCategory = null;
    let selectedCountry = null;

    function renderCategories(requests) {
      const searchTerm = categorySearch.value.toLowerCase();
      const filtered = categories.filter(c => c.toLowerCase().includes(searchTerm));
      categoryList.innerHTML = "";
      filtered.slice(0, visibleCategories).forEach(cat => {
        const count = requests.filter(r => r.category === cat).length;
        const li = document.createElement("li");
        li.innerHTML = `<a href="#">${cat}<span class="count">(${count})</span></a>`;
        li.addEventListener("click", () => {
          selectedCategory = cat;
          renderRequests();
        });
        categoryList.appendChild(li);
      });
    }

    function renderCountries() {
      const requests = getRequests();
      const searchTerm = countrySearch.value.toLowerCase();
      const filtered = allCountries.filter(c => c.toLowerCase().includes(searchTerm));
      countryList.innerHTML = "";
      filtered.slice(0, visibleCountries).forEach(c => {
        const count = requests.filter(r => r.country === c).length;
        const li = document.createElement("li");
        li.innerHTML = `<a href="#">${c}<span class="count">(${count})</span></a>`;
        li.addEventListener("click", () => {
          selectedCountry = c;
          renderRequests();
        });
        countryList.appendChild(li);
      });
    }

    document.getElementById("showMoreCountries").addEventListener("click", () => {
      visibleCountries += 10;
      renderCountries();
    });

    countrySearch.addEventListener("input", renderCountries);
    categorySearch.addEventListener("input", () => renderCategories(getRequests()));

    clearFilters.addEventListener("click", () => {
      selectedCategory = null;
      selectedCountry = null;
      searchInput.value = "";
      categorySearch.value = "";
      countrySearch.value = "";
      visibleCategories = 15;
      visibleCountries = 10;
      renderRequests();
    });

    function renderRequests() {
      const allReq = getRequests();
      renderCategories(allReq);
      renderCountries();

      const term = searchInput.value.toLowerCase();
      let filtered = allReq.filter(r =>
        (activeTab === "all" || r.type === activeTab) &&
        (!selectedCategory || r.category === selectedCategory) &&
        (!selectedCountry || r.country === selectedCountry) &&
        (r.title.toLowerCase().includes(term) || r.description.toLowerCase().includes(term))
      );

      requestContainer.innerHTML = "";
      filtered.slice(0, visibleRequests).forEach(r => {
        const div = document.createElement("div");
        div.className = "request-card";
        div.innerHTML = `<h5>${r.title}</h5><p>${r.description}</p><small>${r.country} · ${r.category}</small>`;
        requestContainer.appendChild(div);
      });

      document.getElementById("showMoreRequests").style.display =
        filtered.length > visibleRequests ? "block" : "none";
    }

    document.getElementById("showMoreRequests").addEventListener("click", () => {
      visibleRequests += 10;
      renderRequests();
    });

    searchInput.addEventListener("input", renderRequests);

    ["tabAll", "tabBuy", "tabSell"].forEach(id => {
      document.getElementById(id).addEventListener("click", e => {
        document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
        e.target.classList.add("active");
        activeTab = id === "tabAll" ? "all" : id === "tabBuy" ? "buy" : "sell";
        renderRequests();
      });
    });

    renderRequests();
  </script>
</body>
</html>
