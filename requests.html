<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Requests - Trader Route</title>
<link rel="icon" href="assets/logos.png" type="image/png">
<style>
  body {font-family: Arial, sans-serif; background:#f4f4f4; margin:0;}
  header {background:#fff; padding:15px 40px; box-shadow:0 2px 8px rgba(0,0,0,0.1); display:flex; justify-content:space-between; align-items:center;}
  .logo-container{display:flex;align-items:center;gap:10px;}
  .logo-container img{height:42px;}
  main{max-width:900px;margin:40px auto;padding:0 20px;}
  .filters{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap;}
  .filters button{padding:8px 16px;border:none;border-radius:5px;cursor:pointer;font-weight:600;}
  .filters button.active{background:#008d62;color:#fff;}
  .item{background:#fff;padding:15px;border-radius:8px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  .item h3{margin:0 0 8px 0;}
  .tags{font-size:14px;color:#666;margin-bottom:5px;}
  .empty{text-align:center;color:#555;margin-top:40px;}
</style>
</head>
<body>

<header>
  <div class="logo-container">
    <a href="index.html"><img src="assets/logos.png" alt="Trader Route Logo"></a>
    <span>The Silk Road of E-Commerce</span>
  </div>
</header>

<main>
  <h2>Trade Requests</h2>
  <div class="filters">
    <button id="allBtn" class="active" onclick="filterRequests('all')">All Requests</button>
    <button id="buyBtn" onclick="filterRequests('buyer')">Buying Requests</button>
    <button id="sellBtn" onclick="filterRequests('seller')">Selling Offers</button>
  </div>
  <div id="list"></div>
  <div class="empty" id="empty" style="display:none;">No requests found.</div>
</main>

<script>
let allRequests = JSON.parse(localStorage.getItem("requests") || "[]");
let listDiv = document.getElementById("list");

function render(type="all"){
  listDiv.innerHTML="";
  let filtered = allRequests.filter(r=>r.approved);
  if(type!=="all"){filtered = filtered.filter(r=>r.type===type);}
  if(filtered.length===0){document.getElementById("empty").style.display="block"; return;}
  document.getElementById("empty").style.display="none";

  filtered.forEach(r=>{
    listDiv.innerHTML += `
      <div class="item">
        <h3>${r.title}</h3>
        <p class="tags"><b>${r.type==="buyer"?"Buyer":"Seller"}:</b> ${r.name} — <b>Country:</b> ${r.country} — <b>Date:</b> ${r.date}</p>
        <p>${r.desc}</p>
      </div>`;
  });
}

function filterRequests(type){
  document.querySelectorAll(".filters button").forEach(b=>b.classList.remove("active"));
  if(type==="all") document.getElementById("allBtn").classList.add("active");
  if(type==="buyer") document.getElementById("buyBtn").classList.add("active");
  if(type==="seller") document.getElementById("sellBtn").classList.add("active");
  render(type);
}
render();
</script>

</body>
</html>
