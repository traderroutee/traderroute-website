<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trader Route – Requests</title>
  <meta name="description" content="Explore global buy and sell requests on Trader Route. Connect directly with verified buyers and suppliers." />
  <meta name="keywords" content="Trader Route, requests, marketplace, B2B trade, buyer, seller" />
  <meta name="author" content="Trader Route" />
  <link rel="canonical" href="https://traderroute.com/requests.html" />
  <link rel="icon" href="assets/logos.png" />

  <style>
    :root { --green: #008b6a; --green-dark: #006b52; }
    body { font-family: "Inter", Arial, sans-serif; background: #f6f8fa; margin: 0; color: #222; }

    header { display: flex; align-items: center; justify-content: space-between;
      background: #fff; padding: 12px 20px; border-bottom: 1px solid #ddd;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 999; }
    header img { height: 50px; cursor: pointer; }
    header .tagline { font-size: 14px; color: #555; font-weight: 600; margin-left: 10px; }
    nav a { margin: 0 10px; text-decoration: none; color: #333; font-weight: 600; }
    nav a:hover { color: var(--green); }

    .btn-green { background: var(--green); color: #fff; border: none; border-radius: 6px;
      padding: 8px 14px; font-weight: 600; cursor: pointer; }
    .btn-green:hover { background: var(--green-dark); }

    .tabs { display: flex; justify-content: center; gap: 10px; padding: 14px 0;
      background: #fff; border-bottom: 1px solid #ddd; }
    .tabs button { background: none; border: none; font-weight: 600; font-size: 17px;
      padding: 10px 24px; border-radius: 25px; cursor: pointer; color: #333; }
    .tabs button.active { background: var(--green); color: #fff; }

    .container { max-width: 1300px; margin: 30px auto; display: flex; gap: 20px; padding: 0 15px; }
    .sidebar { width: 300px; background: #fff; padding: 22px; border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06); }
    .content { flex: 1; background: #fff; border-radius: 12px; padding: 30px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06); }

    .request-card { border: 1px solid #e3e3e3; border-radius: 8px; padding: 15px;
      margin-bottom: 15px; background: #fff; transition: .2s; cursor: pointer; }
    .request-card:hover { box-shadow: 0 3px 10px rgba(0,0,0,0.08); transform: translateY(-2px); }
    .request-card h5 { margin: 0 0 6px; font-size: 17px; font-weight: 600; }
    .request-card p { margin: 0 0 4px; font-size: 14px; color: #444; }
    .request-card small { color: #666; }
    .msg-btn { background: var(--green); color: #fff; border: none; border-radius: 5px;
      padding: 6px 10px; font-size: 13px; font-weight: 600; cursor: pointer; margin-top: 6px; }
    .msg-btn:hover { background: var(--green-dark); }

    #showMoreRequests { background: var(--green); color: #fff; border: none; border-radius: 6px;
      padding: 10px 15px; cursor: pointer; font-weight: 600; margin: 20px auto; display: block; }
    #showMoreRequests:hover { background: var(--green-dark); }
  </style>
</head>

<body>
  <!-- ✅ HEADER -->
  <header>
    <div style="display:flex;align-items:center;cursor:pointer;" onclick="location.href='index.html'">
      <img src="assets/logos.png" alt="Trader Route" />
      <span class="tagline">The Silk Road of E-Commerce</span>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="companies.html">Companies</a>
      <a href="requests.html" style="color:var(--green);font-weight:700;">Requests</a>
      <a href="contact.html">Contact</a>
      <a href="pricing.html">Pricing</a>
    </nav>
    <div>
      <button class="btn-green" onclick="location.href='login.html'">Sign In</button>
      <button class="btn-green" onclick="location.href='register.html'">Sign Up</button>
    </div>
  </header>

  <!-- ✅ TABS -->
  <div class="tabs">
    <button id="tabAll" class="active">All Requests</button>
    <button id="tabBuy">Buy Requests</button>
    <button id="tabSell">Sell Requests</button>
    <button id="tabFree" onclick="location.href='free-request.html'">Free Request</button>
  </div>

  <div class="container">
    <div class="sidebar">
      <h4>Categories</h4>
      <ul id="categoryList"></ul>

      <h4>Countries</h4>
      <ul id="countryList"></ul>
    </div>

    <div class="content">
      <div id="requestItems"></div>
      <button id="showMoreRequests">Show more requests</button>
    </div>
  </div>

  <script>
    const getRequests = () => JSON.parse(localStorage.getItem("requests") || "[]");
    const container = document.getElementById("requestItems");
    const showMoreBtn = document.getElementById("showMoreRequests");
    let visible = 10;
    let activeTab = "all";

    function renderRequests() {
      const all = getRequests();
      const filtered = all.filter(r => activeTab === "all" || r.type === activeTab);
      container.innerHTML = "";
      filtered.slice(0, visible).forEach(r => {
        const msgTo = r.ownerEmail || r.contactEmail || r.email || "";
        const div = document.createElement("div");
        div.className = "request-card";
        div.onclick = () => {
          window.location.href = `request-detail.html?id=${encodeURIComponent(r.id)}&to=${encodeURIComponent(msgTo)}`;
        };
        const msgBtn = msgTo
          ? `<button class="msg-btn" onclick="event.stopPropagation();window.location.href='messages.html?to=${encodeURIComponent(msgTo)}'">Message</button>`
          : "";
        div.innerHTML = `
          <h5>${r.title || "Untitled Request"}</h5>
          <p>${r.description || ""}</p>
          <small>${r.country || ""} • ${r.category || ""}</small><br>
          ${msgBtn}
        `;
        container.appendChild(div);
      });
      showMoreBtn.style.display = filtered.length > visible ? "block" : "none";
    }

    document.getElementById("tabAll").onclick = () => { activeTab = "all"; setActive("tabAll"); renderRequests(); };
    document.getElementById("tabBuy").onclick = () => { activeTab = "buy"; setActive("tabBuy"); renderRequests(); };
    document.getElementById("tabSell").onclick = () => { activeTab = "sell"; setActive("tabSell"); renderRequests(); };

    function setActive(id) {
      document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    showMoreBtn.onclick = () => { visible += 10; renderRequests(); };

    renderRequests();
  </script>
</body>
</html>
